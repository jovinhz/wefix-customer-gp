(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d8b89786"],{6797:function(e,t,a){"use strict";a.r(t);var s=a("7a23");const o=e=>(Object(s["pushScopeId"])("data-v-2f478239"),e=e(),Object(s["popScopeId"])(),e),r={class:"pt-5"},n=o(()=>Object(s["createElementVNode"])("img",{src:"resources/images/illustrations/present.svg",alt:"",class:"illustration"},null,-1)),c=o(()=>Object(s["createElementVNode"])("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1440 320",class:"wave"},[Object(s["createElementVNode"])("path",{fill:"#2AA8FF","fill-opacity":"0.3",d:"M0,288L60,277.3C120,267,240,245,360,240C480,235,600,245,720,256C840,267,960,277,1080,266.7C1200,256,1320,224,1380,208L1440,192L1440,320L1380,320C1320,320,1200,320,1080,320C960,320,840,320,720,320C600,320,480,320,360,320C240,320,120,320,60,320L0,320Z"})],-1)),i={class:"container p-4"},l=o(()=>Object(s["createElementVNode"])("div",{class:"brand row align-items-center justify-content-center"},[Object(s["createElementVNode"])("img",{id:"logo",src:"resources/logo.png",alt:"wefixcbs"}),Object(s["createElementVNode"])("h2",{class:"name"},"WeFixCBS")],-1)),d={class:"card py-5 px-5"},m=o(()=>Object(s["createElementVNode"])("h4",{class:"text-center mb-5 pt-2"},"Reset Password",-1)),u={key:0},p={class:"text-center"},b={class:"mb-2"},O=o(()=>Object(s["createElementVNode"])("span",null,"Tidak menerima otp? ",-1)),f=o(()=>Object(s["createElementVNode"])("p",{class:"text-center text-gray-5"},"Copyright Â© 2022",-1));function g(e,t,a,o,g,h){const w=Object(s["resolveComponent"])("a-alert"),j=Object(s["resolveComponent"])("a-input"),k=Object(s["resolveComponent"])("a-form-item"),v=Object(s["resolveComponent"])("a-input-password"),C=Object(s["resolveComponent"])("a-button"),N=Object(s["resolveComponent"])("a-form");return Object(s["openBlock"])(),Object(s["createElementBlock"])("div",r,[n,c,Object(s["createElementVNode"])("div",i,[l,Object(s["createElementVNode"])("div",d,[m,o.error?(Object(s["openBlock"])(),Object(s["createBlock"])(w,{key:0,message:"Gagal",description:o.error,type:"error","show-icon":"",class:"mb-4"},null,8,["description"])):Object(s["createCommentVNode"])("",!0),Object(s["createVNode"])(N,{ref:"formRef",model:o.formState,rules:o.rules,layout:"vertical"},{default:Object(s["withCtx"])(()=>[Object(s["createVNode"])(k,{ref:"token",label:"Kode OTP",name:"token"},{default:Object(s["withCtx"])(()=>[Object(s["createVNode"])(j,{value:o.formState.token,"onUpdate:value":t[0]||(t[0]=e=>o.formState.token=e),placeholder:"Masukkan kode OTP",maxLength:"6"},null,8,["value"])]),_:1},512),Object(s["createVNode"])(k,{ref:"password",label:"Password",name:"password"},{default:Object(s["withCtx"])(()=>[Object(s["createVNode"])(v,{value:o.formState.password,"onUpdate:value":t[1]||(t[1]=e=>o.formState.password=e),size:"large",placeholder:"Masukkan password"},null,8,["value"])]),_:1},512),Object(s["createVNode"])(k,{ref:"password_confirmation",label:"Konfirmasi Password",name:"password_confirmation"},{default:Object(s["withCtx"])(()=>[Object(s["createVNode"])(v,{value:o.formState.password_confirmation,"onUpdate:value":t[2]||(t[2]=e=>o.formState.password_confirmation=e),size:"large",placeholder:"Masukkan konfirmasi password"},null,8,["value"])]),_:1},512),Object(s["createVNode"])(k,{class:"mt-5"},{default:Object(s["withCtx"])(()=>[Object(s["createVNode"])(C,{type:"primary","html-type":"submit",onClick:h.onSubmit,class:"w-100",size:"large",loading:o.loading},{default:Object(s["withCtx"])(()=>[o.loading?Object(s["createCommentVNode"])("",!0):(Object(s["openBlock"])(),Object(s["createElementBlock"])("span",u,"Reset"))]),_:1},8,["onClick","loading"])]),_:1})]),_:1},8,["model","rules"]),Object(s["createElementVNode"])("div",p,[Object(s["createElementVNode"])("div",b,[O,Object(s["createElementVNode"])("a",{class:"text-primary",onClick:t[3]||(t[3]=(...e)=>h.reRequestOtp&&h.reRequestOtp(...e))}," Kirim ulang ")])])]),f])])}var h=a("9a1e"),w={setup(){const e=Object(s["ref"])(),t=Object(s["reactive"])({token:"",password:"",password_confirmation:""}),a=Object(s["ref"])(!1),o=Object(s["ref"])(),r=async(e,a)=>""===a?Promise.reject("Konfirmasi password tidak boleh kosong."):a!==t.password?Promise.reject("Password dan Konfirmasi password harus sama."):Promise.resolve(),n={token:[{required:!0,message:"Kode OTP tidak boleh kosong.",trigger:"change"},{len:6,message:"Kode OTP harus 6 karakter",trigger:"change"}],password:[{required:!0,message:"Password tidak boleh kosong.",trigger:"change"}],password_confirmation:[{required:!0,message:"Konfirmasi Password tidak boleh kosong.",trigger:"change"},{validator:r,trigger:"change"}]};return Object(s["watch"])(t,()=>{t.token=t.token.toUpperCase()}),{formRef:e,formState:t,rules:n,loading:a,error:o}},methods:{onSubmit(){this.formRef.validate().then(()=>this.doResetPassword()).catch(()=>{})},async doResetPassword(){this.loading=!0;try{var e;const t={...Object(s["toRaw"])(this.formState)};t.email=null===(e=this.$route.params)||void 0===e?void 0:e.email;const a=await Object(h["d"])(t);200===a.status?this.$modal.success({title:()=>"Reset Password Berhasil",content:()=>"Selamat, password Anda berhasil direset",onOk:()=>{this.$router.push("/auth/login")}}):422===a.status&&this.$modal.error({title:()=>"Reset Password Gagal",content:()=>a.data.error})}catch(t){}this.loading=!1},async reRequestOtp(){try{var e;const t=await Object(h["c"])(null===(e=this.$route.params)||void 0===e?void 0:e.email);200===t.status?this.$modal.success({title:()=>"Request OTP Berhasil",content:()=>"OTP berhasil dikirim ke email Anda"}):422===t.status?this.$modal.error({title:()=>"Request OTP Gagal",content:()=>t.data.error}):this.$modal.error({title:()=>"Request OTP Gagal",content:()=>"Terjadi suatu kesalahan, mohon coba beberapa saat lagi"})}catch(t){}}}},j=(a("c740"),a("d959")),k=a.n(j);const v=k()(w,[["render",g],["__scopeId","data-v-2f478239"]]);t["default"]=v},"9a1e":function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"e",(function(){return n})),a.d(t,"b",(function(){return c})),a.d(t,"f",(function(){return i})),a.d(t,"c",(function(){return l})),a.d(t,"d",(function(){return d}));var s=a("997a");const o=new s["a"]({hasErrorNotif:!1}),r=(e,t)=>o.axiosInstance.post("/customer/sessions/login",{phone_number:e,password:t}),n=e=>o.axiosInstance.post("/customer/sessions/register",e),c=()=>o.axiosInstance.get("/customer/sessions/request_token_verify_email"),i=e=>o.axiosInstance.post("/customer/sessions/verify_email",{token:e}),l=e=>o.axiosInstance.get("/customer/sessions/request_token_forgot_password",{params:{email:e}}),d=e=>o.axiosInstance.post("/customer/sessions/reset_password",e)},a41d:function(e,t,a){},c740:function(e,t,a){"use strict";a("a41d")}}]);